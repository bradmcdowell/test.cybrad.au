[ { "title": "#27 - CyberArk SIA Linux SSH", "url": "/posts/YouTube-27-CyberArk_SIA_Linux_SSH/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, Identity, SIA, ZSP, PSM, PSMP", "date": "2025-08-06 07:10:10 +1000", "snippet": "Welcome back to the CyberArk SIA series! In this video, we take a deep dive into the SIA Linux SSH use case.CyberArk DocsTBCObjectives Applying the right level of Privilege Controls Review PSM, P...", "content": "Welcome back to the CyberArk SIA series! In this video, we take a deep dive into the SIA Linux SSH use case.CyberArk DocsTBCObjectives Applying the right level of Privilege Controls Review PSM, PSMP, and SIA architecture Review SIA: Connector install, Pools, Networks, and general settings Connect via SIA-SSH using vaulted credentials Deploy SIA CA and create recurring access policies Understand SSH fingerprinting Understand SSH certificate authority Review auditing capabilitiesTimeline Intro – 0:00 Applying the Right Level of Privilege Controls – 1:17 PSM Architecture – 2:09 PSMP Architecture – 3:25 SIA Architecture – 4:00 Demo: PSM and PSMP – 6:52 Review SIA: Connector Install, Pools, Networks, and General Settings – 9:40 Connect via SIA-SSH Using Vaulted Credentials – 12:32 Deploy SIA CA and Create Recurring Access Policies – 14:32 Attempt SIA Connection When CA Is Not Present – 19:27 SIA: Multiple Policies – 21:00 Understanding SSH Fingerprinting – 22:56 Understanding SSH Certificate Authority – 25:06 Review Auditing Capabilities – 28:52LinkedIn: https://au.linkedin.com/in/bradmcdowell" }, { "title": "#26 - CyberArk SIA Windows Strong Account", "url": "/posts/YouTube-26-CyberArk_SIA_Strong_Account/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, Identity, SIA, ZSP, CPM", "date": "2025-07-22 07:10:10 +1000", "snippet": "Welcome back to the CyberArk SIA series! In this video, we take a deep dive into the SIA Windows Strong Account, focusing on how to enforce least privilege wherever possible through secure configur...", "content": "Welcome back to the CyberArk SIA series! In this video, we take a deep dive into the SIA Windows Strong Account, focusing on how to enforce least privilege wherever possible through secure configuration and testing.CyberArk DocsWhat is a Windows strong account?Strong AccountThe script bellow allows the Strong Account to be able to edit the members of the AdminSDHolder template.# Set the AD account that will be used for the Strong Account$StrongAccount = \"DOMAIN\\&lt;CyberArk_Strong_Account&gt;\"# This gets the AD domain in DN format$DistinguishedName = (Get-ADDomain).DistinguishedNameWrite-host \"Domain OU is =\" $DistinguishedName# This gets the AdminSDHolder DN$AdminSDHolerDN = \"CN=AdminSDHolder,CN=System,\"+$DistinguishedNameWrite-host \"AdminSDHolder DN is =\" $AdminSDHolerDN# Grant permissions to allow modifying group membershipdsacls.exe $AdminSDHolerDN /G $StrongAccount\":WP;member\"Objectives Platform and Safe settings – SIA Strong Account Remove SIA Strong Account from Domain Admins Delegate permissions for SIA Strong Account Group Policy restrictions for SIA Strong Account Test (Server Admin and Domain Admin) ZSP use cases Allow SIA Strong Account to create Domain Admins Test – Domain Admin ZSP use case Test – Local Admin ZSP use case Multiple SIA Strong Accounts – Least PrivilegeTimeline Intro 0:00 Platform and Safe settings 1:30 Remove from DA 5:47 Set Permissions 6:28 Group Policy Settings 8:40 Test Server Admin ZSP Account 9:35 Test Domain Admin ZSP - Failure 11:40 Allow Strong Account to mange Domain Admins 12:45 Test Domain Admin ZSP - Success 17:24 Test Local ZSP Account 18:40 Multiple SIA Strong Accounts 19:56LinkedIn: https://au.linkedin.com/in/bradmcdowell" }, { "title": "#25 - Migrate CyberArk PSM to SIA ZSP for Windows RDP Access", "url": "/posts/YouTube-25-Migrate-CyberArk_PSM_to_SIA_ZSP/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, Identity, SIA, ZSP, PSM, CPM", "date": "2025-06-26 07:10:10 +1000", "snippet": "In this video, we walk through the full process of migrating from CyberArk PSM (Privileged Session Manager) to the CyberArk Secure Infrastructure Access (SIA) ZSP (Zero Standing Privileges) model, ...", "content": "In this video, we walk through the full process of migrating from CyberArk PSM (Privileged Session Manager) to the CyberArk Secure Infrastructure Access (SIA) ZSP (Zero Standing Privileges) model, specifically for Windows RDP access. Whether you’re just exploring ZSP or planning a full migration, this guide covers all the essential steps and configurations you need.Objectives Compare PSM vs SIA-ZSP connections SIA Connector Install (Windows and Linux) SIA Settings SIA TLS Certificates Connect to a target with SIA (Using a vaulted account) SIA Strong Account (Windows) SIA Policies (Local and Domain) ZSP Test ZSP PoliciesTimeline Intro 0:00 PSM vs SIA ZSP 1:30 PSM Connection Example 7:10 SIA Roles 7:53 SIA Connector Pools 8:43 SIA Connector Install 9:40 SIA Settings 11:00 TLS Certiificates 12:45 Test SIA with vaulted acccount 13:35 SIA Strong Account 14:30 SIA Policy 20:38 SIA Local Ephemeral Test 20:25 SIA Domain Ephemeral Test 24:25 Disable Vaulted Accounts 26:05LinkedIn: https://au.linkedin.com/in/bradmcdowell" }, { "title": "#24 - CyberArk Privilege Cloud ISPSS Architecture Explained", "url": "/posts/YouTube-24-CyberArk-Privilege-Cloud-ISPSS-Architecture/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, Identity, SIA, PSM, CPM", "date": "2025-03-07 14:10:10 +1100", "snippet": "In this video, you’ll explore the CyberArk ISPSS Privilege Cloud architecture. You’ll learn how all the components work together to secure privileged access and enhance your organization’s security...", "content": "In this video, you’ll explore the CyberArk ISPSS Privilege Cloud architecture. You’ll learn how all the components work together to secure privileged access and enhance your organization’s security. Whether you’re an IT professional, security engineer, or just curious about CyberArk, this video will give you a clear understanding of ISPSS and its role in Privilege Cloud.CyberArk DocsCyberArk docs Privilege Cloud Architecture has a detailed description of all the components.High-Level Architecture DiagramThe below diagram is a high level overview on how a typical environment will connecto to CyberArk Privilege Cloud ISPSS.Low-Level Architecture DiagramThis low-level diagram is an example scenario where Active-Directory is the source for identities.This low-level diagram is an example scenario where an external IdP is the source for identities.Objectives: High-level deployment overview Low-level architecture componentsTimeline: Intro 0:00LinkedIn: https://au.linkedin.com/in/bradmcdowell#IIS #WIN-ACME #Cloudflare #Letsencrypt" }, { "title": "#23 - How to Use WIN-ACME with Cloudflare DNS for SSL Certificate Automation", "url": "/posts/YouTube-23-WIN-ACME-with-Cloudflare/", "categories": "WIN-ACME", "tags": "IIS, WIN-ACME, Cloudflare, Letsencrypt, automation", "date": "2025-02-11 14:10:10 +1100", "snippet": "In this video, you’ll discover how to create a Let’s Encrypt SSL certificate for Windows IIS effortlessly. The video will walk you through automating the process using WIN-ACME and leverage Cloudfl...", "content": "In this video, you’ll discover how to create a Let’s Encrypt SSL certificate for Windows IIS effortlessly. The video will walk you through automating the process using WIN-ACME and leverage Cloudflare DNS for seamless domain validation.Download linksDownload WIN-ACME: the larger, plugin support file and the Cloudflare Plugin from the GitHub releases page.Cloudflare API TokenCreate your cloudflare API token here.Venafi TLS Protect ACME integration - Win-ACME clienthttps://www.youtube.com/watch?v=vTjR8JY5TEUObjectives: Download WIN-ACME and Cloudflare plugin Create a Cloudflare API token Run wacs.exe – Request Let’s Encrypt certificate TestTimeline: Intro 0:00 Download Requirements 2:30 Create Cloudflare API Token 3:00 Extract Zip 4:26 DNS Settings 5:00 Run wacs.exe 6:12 IIS Bindings 9:40 Test 9:57LinkedIn: https://au.linkedin.com/in/bradmcdowell#IIS #WIN-ACME #Cloudflare #Letsencrypt" }, { "title": "#22 - CyberArk Central Credential Provider (CCP)", "url": "/posts/YouTube-22-CyberArk-Central-Credential-Provider/", "categories": "CyberArk Central Credential Provider", "tags": "cyberark, cyberarkccp, privilegecloud, powershell, curl, tls, scripts", "date": "2025-01-14 14:10:10 +1100", "snippet": "In this video, you’ll learn how to install the CyberArk Central Credential Provider (CCP) and perform thorough testing using PowerShell and curl. Additionally, I’ll guide you through configuring th...", "content": "In this video, you’ll learn how to install the CyberArk Central Credential Provider (CCP) and perform thorough testing using PowerShell and curl. Additionally, I’ll guide you through configuring the Qualys Cloud Platform to securely retrieve secrets from the CyberArk CCP.CyberArk MarketplaceDownload CyberArk Central Credential Provider found at the CyberArk Marketplace.CyberArk Central Credential Provider DocsCentral Credential Provider (CCP)Load balance the Central Credential ProviderDisable TLS 1.3 over TCPMicrosoft Blog - Windows Server 2022 IIS web site TLS 1.3 does not work with client certificate authenticationMicrosoft A&amp;A - Requests to IIS with SSLCertNegotiate and TLS 1.3 is failingTennable Docs Tennable DocumentationPowerShell Script - No Certificate Authentication#Variable Definitions$restresponse = $null$object = \"&lt;AccountNameHere&gt;\"$CCPAddress = \"https://CCPURL.company.com\"$AppID = \"ApplicationNameHere”$URI = \"$CCPAddress/AIMWebService/api/Accounts?AppID=$AppID&amp;Object=$object\"#Creation of REST Web Request$restresponse = invoke-restmethod -uri $URI -method GET#REST Output$restresponsePowerShell Command to get cert thumbprintsGet-ChildItem -Path Cert:\\CurrentUser\\MyPowerShell Script - With Certificate Authentication#Variable Definitions$restresponse = $null$object = \"&lt;AccountNameHere&gt;\"$CCPAddress = \"https://CCPURL.company.com\"$AppID = \"ApplicationNameHere”$URI = \"$CCPAddress/AIMWebService/api/Accounts?AppID=$AppID&amp;Object=$object\"#Creation of REST Web Request$restresponse = invoke-restmethod -uri $URI -method GET -CertificateThumbprint \"1AC459C80C24245B05ECF4137FC4E80FB81D7EF6\"#REST Output$restresponseOpenSSL CommandsThis command will extract the full certificate chain of the public certificate.openssl pkcs12 -in export.pfx -out cert.pem -nodes -nokeysThis command will extract the private key only and encrypt it with a passphrase.openssl pkcs12 -in export.pfx -nocerts -out key.pemThis command will test the ccpcurl --http1.1 --cert cert.pem --key key.pem \"https://CCPURL.company.com/AIMWebService/api/Accounts?AppID=INSERTAPPIDHERE&amp;Object=INSERTOBJECTNAMEHERE\" -vTimeline Intro 0:00 Set Password and Download Files 2:26 Install CCP on CCP1 3:08 Install CCP on CCP2 12:42 Add Applications 13:30 Safe Permissions 15:53 Add Account 18:29 Test with PowerShell 21:13 Setup certificate Template and Request Cert 22:06 Update Application 23:39 Test PowerShell with Cert auth 25:13 Export certificate 27:23 Convert certificate with OpenSSL 29:58 Test CCP with Curl 32:31 Qualys Setup and Testing" }, { "title": "#21 - CyberArk Privilege Cloud Tools", "url": "/posts/YouTube-21-CyberArk-Privilege-Cloud-Tools/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, cyberarkmarketplace, privilegecloud, powershell, scripts", "date": "2024-12-27 09:10:10 +1100", "snippet": "This video explores handy scripts bundled with the CyberArk Privilege Cloud Tools package found in the CyberArk Marketplace.CyberArk MarketplaceDownload CyberArk Privilege Cloud Tools found at the ...", "content": "This video explores handy scripts bundled with the CyberArk Privilege Cloud Tools package found in the CyberArk Marketplace.CyberArk MarketplaceDownload CyberArk Privilege Cloud Tools found at the CyberArk Marketplace.Orphaned SafesGet-OrphanedSafes.ps1 -PortalURL https://&lt;subdomain&gt;.cyberark.cloudUser Types and Login ActivityGet-UserTypesAndUsersLoginActivity.ps1 -PortalURL https://&lt;subdomain&gt;.cyberark.cloudSync Identiity Roles With Vault UsersSyncIdentityRolesWithVaultUsers.ps1 -PortalURL https://&lt;subdomain&gt;.cyberark.cloudDelete UsersDeleteUsersFromVault.ps1 -PortalURL https://&lt;subdomain&gt;.cyberark.cloudTimeline Intro 0:00 Get Orphaned Safes 2:07 License Capacity and Users Login Activity 5:22 Sync Identity Roles With Vault Users 7:23 Delete Users 10:07" }, { "title": "#20 - CyberArk - How to connect to target systems", "url": "/posts/YouTube-20-CyberArk-How-to-Connect-to-target-systems/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, SIA, PSM", "date": "2024-11-25 09:10:10 +1100", "snippet": "This video explores various methods end users can use to connect to their target systems through CyberArk Privilege Cloud.ConnectionsWindows RDP - via PSM - RDP File DownloadConnection FlowRDP File...", "content": "This video explores various methods end users can use to connect to their target systems through CyberArk Privilege Cloud.ConnectionsWindows RDP - via PSM - RDP File DownloadConnection FlowRDP File Download -&gt; RDP Client -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksWindows RDP - via PSM - HTML5 GatewayConnection FlowEnd Uesr Browser -&gt; HTML5 Gateway -&gt; SIA Connector -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksConfigure remote access for employees using the HTML5 Gateway serviceLinux SSH - via PSM - RDP File DownloadConnection FlowRDP File Download -&gt; RDP Client -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksLinux SSH - via PSM - HTML5 GatewayConnection FlowEnd Uesr Browser -&gt; HTML5 Gateway -&gt; SIA Connector -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksConfigure remote access for employees using the HTML5 Gateway serviceChrome Web - Palo Alto - via PSM - HTML5 GatewayConnection FlowEnd Uesr Browser -&gt; HTML5 Gateway -&gt; SIA Connector -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksPalo Alto Networks PAN-OS - PSMConfigure remote access for employees using the HTML5 Gateway serviceSSH - Palo Alto - via PSM - HTML5 GatewayConnection FlowEnd Uesr Browser -&gt; HTML5 Gateway -&gt; SIA Connector -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksConfigure remote access for employees using the HTML5 Gateway serviceWindows RDP - via SIA - Accounts ViewConnection FlowRDP File Download -&gt; RDP Client -&gt; SIA -&gt; SIA Connector -&gt; Target SystemDocumentation LinksConfigure the Privilege Cloud Portal to support SIA accessWindows RDP - via SIA - Connection GuidanceConnection FlowRDP File Download -&gt; RDP Client -&gt; SIA -&gt; SIA Connector -&gt; Target SystemDocumentation LinksGive end users access to Connection guidanceWindows RDP - ZSP - via SIA - Connection GuidanceConnection FlowRDP File Download -&gt; RDP Client -&gt; SIA -&gt; SIA Connector -&gt; Target SystemDocumentation LinksSIA end user accessWindows RDP, SSH and Web - via PSM – PSMClientConnection FlowPSMClient -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksCyberArk Marketplace - PSMClient ClientWindows RDP - via PSM - 3rd Party RDP ClientConnection Flow3rd Party RDP Client -&gt; Loadbalancer -&gt; PSM Server -&gt; Target SystemDocumentation LinksConnect using RDPWindows RDP - via SIA - 3rd Party RDP ClientConnection Flow3rd Party RDP Client -&gt; SIA -&gt; SIA Connector -&gt; Target SystemDocumentation LinksConnect to a Windows targetLinux SSH - via SIA - SSH ClientConnection FlowSSH Client (Windows Terminal) -&gt; SIA -&gt; SIA Connector -&gt; Target SystemDocumentation LinksSet up SIA for accessConnect to a Linux targetLinux SSH - via PSMP - SSH ClientConnection FlowSSH Client (Windows Terminal) -&gt; PSMP Loadbalancer -&gt; PSMP Server -&gt; Target SystemDocumentation LinksPSM for SSH Syntax Cheat SheetDeploy PSM for SSH (Unix connector)Linux SSH - via PSMP - MFA Caching - SSH ClientConnection FlowSSH Client (Windows Terminal) -&gt; PSMP Loadbalancer -&gt; PSMP Server -&gt; Target SystemDocumentation LinksMFA caching (PSM for SSH) in Privilege CloudTimeline Intro 0:00 Windows RDP - via PSM - RDP File Download 0:17 Windows RDP - via PSM - HTML5 Gateway 1:47 Linux SSH - via PSM - RDP File Download 3:46 Linux SSH - via PSM - HTML5 Gateway 4:18 Chrome Web - Palo Alto - via PSM - HTML5 Gateway 4:47 SSH - Palo Alto - via PSM - HTML5 Gateway 5:28 Windows RDP - via SIA - Accounts View 5:55 Windows RDP - via SIA - Connection Guidance 6:46 Windows RDP - ZSP - via SIA - Connection Guidance 7:45 Windows RDP, SSH and Web - via PSM – PSMClient 9:20 Windows RDP - via PSM - 3rd Party RDP Client 11:47 Windows RDP - via SIA - 3rd Party RDP Client 13:00 Linux SSH - via SIA - SSH Client 14:05 Linux SSH - via PSMP - SSH Client 15:15 Linux SSH - via PSMP - MFA Caching - SSH Client 15:50" }, { "title": "#19 - CyberArk Migrate Accounts via REST API", "url": "/posts/YouTube-19-CyberArk-Migrate-Accounts-via-REST-API/", "categories": "CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, API", "date": "2024-11-07 09:10:10 +1100", "snippet": "This video covers the process of migrating Platforms, Safes and Accounts using the API.Objectives Migrate Platforms via REST API Migrate Safes via REST API Migrate Accounts via REST APICyberArk ...", "content": "This video covers the process of migrating Platforms, Safes and Accounts using the API.Objectives Migrate Platforms via REST API Migrate Safes via REST API Migrate Accounts via REST APICyberArk GitHub DocumenationCyberark epv-api-scriptsPowerShell Commnads Used# Download GitHub repo https://github.com/cyberark/epv-api-scripts# Unbock Filesdir -r | Unblock-File# Import Modulescd \"C:\\Migration\\epv-api-scripts-main\\Migration\\Migration via REST\\\"Import-Module \".\\Migrate.psm1\" -forceImport-Module \"C:\\Migration\\epv-api-scripts-main\\Identity Authentication\\IdentityAuth.psm1\"# Export Platforms cat ./platformlist.txt#$SourceUPCred = get-credentialmkdir ./PLATFORMZIPS/# If auth is CyberArk use this to export platformsC:\\Migration\\epv-api-scripts-main\\Platforms\\Export-Import-Platform.ps1 -PVWAURL https://&lt;SourcePVWA&gt;/PasswordVault/ -ExportFile -ListFile ./platformlist.txt -PlatformZipPath ./PLATFORMZIPS/# If auth is LDAP use this to export platformsC:\\Migration\\epv-api-scripts-main\\Platforms\\Export-Import-Platform.ps1 -PVWAURL https://&lt;SourcePVWA&gt;/PasswordVault/ -ExportFile -ListFile ./platformlist.txt -PlatformZipPath ./PLATFORMZIPS/ -AuthType ldap# Import Platforms$DestUPCred = get-credential$header = Get-IdentityHeader -IdentityTenantURL &lt;Your_Tenant_Identity_ID&gt;.id.cyberark.cloud -UPCreds $DestUPCredC:\\Migration\\epv-api-scripts-main\\Platforms\\Export-Import-Platform.ps1 -ImportFile -PVWAURL https://&lt;subdomain&gt;.privilegecloud.cyberark.cloud/PasswordVault -ListFile ./PLATFORMZIPS/_Exported.txt -LogonToken $header# Source PVWA Auth$SourceUPCred = get-credentialNew-SourceSession -srcPVWAURL https://&lt;SourcePVWA&gt;/PasswordVault/ -srcAuthType LDAP -srcPVWACredentials $SourceUPCred# Export Accounts from SourceExport-Accounts -exportCSV ./export.csv# Use this to open the CSV file and adjust what needs to be migratedStart ./export.csvcat ./Import.csv# Import AccountsImport-Accounts -importCSV ./Import.csv# Command to import Failed accountsImport-Accounts -importCSV ./FailedAccounts.csv# Destination PVWA Auth$DestUPCred = get-credential$header = Get-IdentityHeader -IdentityTenantURL &lt;identityID&gt;.id.cyberark.cloud -UPCreds $DestUPCredNew-DestinationSession -dstPVWAURL https://&lt;subdomain&gt;.privilegecloud.cyberark.cloud/PasswordVault -dstLogonToken $header# Sync SafesSync-Safes -CreateSafes -CPMOverride \"PROD-CPM\"# Sync AccountsSync-Accounts -ProgressDetails -verbose# Handy CommandGet-AccountListTimeline Intro 0:00 Migrate Platforms 1:17 Migrate Safes 5:39 Migrate Accounts 9:55" }, { "title": "#18 - CyberArk EPM – Loosely Connected Devices", "url": "/posts/YouTube-18-EPM-CyberArk-EPM-Loosely-Connected-Devices/", "categories": "EPM, CyberArk Privilege Cloud", "tags": "cyberark, privilegecloud, EPM, Identity", "date": "2024-09-09 08:10:10 +1000", "snippet": "This video covers the process of configuring CyberArk EPM to support rotating local privileged accounts on loosely connected devices. We’ll explore both the manual and automated methods for install...", "content": "This video covers the process of configuring CyberArk EPM to support rotating local privileged accounts on loosely connected devices. We’ll explore both the manual and automated methods for installing the EPM agent and onboarding local privileged accounts into CyberArk Privilege Cloud.Objectives Configure EPM Credentials Rotation Policy Onboard EPM LCD Key Prepare Windows Loosely Device Platform Manually Install EPM Agent Manually Onboard and Rotate Local Privileged Accounts Automate EPM installation and Privileged Account Onboarding Confirm LCD Privileged Accounts OnboardingEPM LCD DocumentaitonCyberark Docs - Manage loosely connected devicesCyberArk Marketplace - EPM LCD Key PlatformCyberArk Docs - Discover local accounts using EPMPVWA Server URL FormatThis is the PVWA URL format that is required when creating the Credentials Rotation Policy in EPM.https://&lt;subdomain&gt;.privilegecloud.cyberark.cloud/EPM LCD KEY PlatformThis is the username and account name for the EPM LCD Key to be used in Privilege Cloud.EPM_PAS_GatewayEPM Agent CommandsUse this command to monitor the EPM agent log.cat -wait -tail 100 \"C:\\Program Files\\CyberArk\\Endpoint Privilege Manager\\Agent\\PASAgent\\Trace\\PASAgentLog.txt\"Use the fllowing commands to stop the EPM agent and force LCD account rotation.cd 'C:\\Program Files\\CyberArk\\Endpoint Privilege Manager\\Agent\\'.\\vf_agent.exe -UseToken &lt;Generated_Secure_Token&gt;.\\vf_agent -StopServ.\\vf_agent.exe -ImmediateLCDRotationStart EPM agent via services.mscPowerShell EPM Agent Install ScriptThis is a sample script that can be used to install the EPM agent. There are many other ways to automate the EPM agent install.Please find the more information here. CyberArk Docs - Install EPM agents on Windows endpoints$filepath = \"C:\\Program Files\\CyberArk\\Endpoint Privilege Manager\\Agent\\vf_agent.exe\"$epminstallerdir = \"\\\\&lt;domain_name&gt;\\NETLOGON\\EPM\"if (Test-Path $filepath) { # The EPM agent exists, so run your command Write-Output \"The EPM Agent is present. Closing Script\"} else { Write-Output \"The EPM agent does not exist. Installing EPM\" MsiExec.exe /i \"$epminstallerdir\\vfagentsetupx64.msi\" INSTALLATIONKEY=\"&lt;INSTALLKEY_HERE&gt;\" CONFIGURATION=\"$epminstallerdir\\CyberArkEPMAgentSetupWindows.config\" /qn}Timeline Intro 0:00 Setup EPM Credentials Rotation Policy 2:10 Setup EPM LCD Key Platform 4:33 Setup Windows LCD Safe and Platform 6:11 Manually Install EPM Agent 7:21 Manually Onboard Localadmin Account 8:52 Setup EPM Accounts Discovery 13:20 Setup Discovery Rule 14:53 Automate EPM Agent Install 16:16 Test EPM Agent Install and Account Onboarding 17:05" }, { "title": "#17 - CyberArk EPM and CyberArk Identity SAML Authentication", "url": "/posts/YouTube-17-EPM-EPM-SAML-Authentication/", "categories": "EPM, CyberArk Identity", "tags": "cyberark, privilegecloud, EPM, Identity", "date": "2024-09-05 08:10:10 +1000", "snippet": "This video covers the process setting up CyberArk Identity SAML auth with CyberArk EPM.Objectives Configure EPM SAML Authentication via CyberArk Identity Add Step Up Authentication Profile Confi...", "content": "This video covers the process setting up CyberArk Identity SAML auth with CyberArk EPM.Objectives Configure EPM SAML Authentication via CyberArk Identity Add Step Up Authentication Profile Configure Automatic User Provisioning.Automatic ProvisioningThe Cyberark EPM Configure authentication via SAML documentation.Link to EPM-User-Binding scriptExample SAML AttributesetAttribute('EPM-User-Binding','[{\"R\":\"00000000-0000-0000-0000-000000000005\",\"S\":[\"All\"]}]');Timeline Intro 0:00 EPM Overview 0:36 Identity SAML Config 0:55 Test SAML Authentication 7:14 Step Up Authentication 9:06 Test Step Up Auth 10:44 User Provisioning 11:32 Test User Provisioning 15:00" }, { "title": "#16 - CyberArk Windows Reconcile", "url": "/posts/YouTube-16-ISPSS-Widnows-Reconcile/", "categories": "Privilege Cloud, CPM", "tags": "cyberark, privilegecloud, CPM", "date": "2024-08-02 09:10:10 +1000", "snippet": "This video covers the process setting up reconcile accounts for CyberArk.Objectives Create Windows Domain Reconcile Accounts and Set Permissions. Configure Windows Domain Platforms in Privilege C...", "content": "This video covers the process setting up reconcile accounts for CyberArk.Objectives Create Windows Domain Reconcile Accounts and Set Permissions. Configure Windows Domain Platforms in Privilege Cloud. Onboard Windows Domain Admin/Enterprise and Server Admin. Create Windows Server Reconcile Account. Onboard Server localadmin account. Additional Information – What to look out for and what not to do.CyberArk KB - How to Reconcile a Domain Admin Account Without Domain Admin Membership for the Reconcile AccountActive-Directory CyberArk Reconcile Permissions Script# This script will set the minimum permissions for the reconcile account.# Set the AD account that will be used fo Reconcile$ReconcileAccount = \"&lt;Domain&gt;\\&lt;ReconcileUser&gt;\"# This gets the AD domain in DN format$DistinguishedName = (Get-ADDomain).DistinguishedNameWrite-host \"Domain OU is =\" $DistinguishedName# Domain Permissionsdsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":CA;Reset Password;user\"dsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":WD\"dsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":WPRP;LockoutTime;user\"dsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":WPRP;account restrictions;user\"# This gets the AdminSDHolder DN$AdminSDHolerDN = \"CN=AdminSDHolder,CN=System,\"+$DistinguishedNameWrite-host \"AdminSDHolder DN is =\" $AdminSDHolerDN# AdminSDHolder Templatedsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":CA;Reset Password\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":WD\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":RP;LockoutTime\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":WP;LockoutTime\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":RP;account restrictions\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":WP;account restrictions\"Extra Information on permission inheritanceClear adminCount and Enable Inheritance on Userhttps://notesbytom.wordpress.com/2017/12/01/clear-admincount-and-enable-inheritance-on-user/Timeline Intro 0:00 Create Domain Reconcile Acccounts 1:25 Set Domain Reconcile Permissions 3:25 Group Policy Consideratioins 4:44 Cyberark Reconcile Safe and Platform Setup 6:20 Onboard Widnows Domain Reconcile Accounts 9:58 Test Reconcile Accounts 12:35 Create Windows Server Reconcile Account 14:52 Setup Windows Server Reconcile Account 16:14 Test Onborad Windows Server Local Admin 19:51 What to look out for 21:50" }, { "title": "#15 - DPA Connector Install, HTML5 Gatway and more...", "url": "/posts/YouTube-15-ISPSS-DPA-Connector-Install/", "categories": "Privilege Cloud, DPA", "tags": "cyberark, privilegecloud, dpa", "date": "2024-05-31 09:10:10 +1000", "snippet": "This video covers the process of installing DPA connectors, Configuring the HTML5 Gateway and how to use DPA with vaulted credentials.Objectives Architecture Overview Install DPA Connectors Conf...", "content": "This video covers the process of installing DPA connectors, Configuring the HTML5 Gateway and how to use DPA with vaulted credentials.Objectives Architecture Overview Install DPA Connectors Configure HTML5 Gateway TLS Certificates Connect to targets using vaulted credentials with DPA Configure and test user access to DPACyberArk Documentation - DPA Network RequirementsCreate HTML5 Gateway CeftificateScript to create self-signed HTML5 Gateway certificateTimeline Intro 0:00 DPA Admin Role 2:29 DPA Connector Install 3:38 DPA Settings 5:16 HTML5 Gateway Setup 5:40 HTML5 Error TLS Certificate 8:02 Exporting TLS Certificate 9:37 DPA Vaulted Credentials 12:59 View DPA Recording 17:08 End User Tile Access 17:41 RDP file without a need to re-auth 19:56" }, { "title": "#14 - CPM / PSM Create Cred File Helper", "url": "/posts/YouTube-14-ISPSS-Privilege-Cloud-CPM-PSM-CreateCred-File/", "categories": "Privilege Cloud, CPM, PSM", "tags": "cyberark, privilegecloud, cpm, psm", "date": "2024-05-30 09:10:10 +1000", "snippet": "This video covers the process of restoring connectivity for the CPM and PSM using the CreateCredFile-Helperr.ps1 script.Objectives Demo CreateCredFile-Helper.ps1CyberArk Marketplace - CyberArk Pri...", "content": "This video covers the process of restoring connectivity for the CPM and PSM using the CreateCredFile-Helperr.ps1 script.Objectives Demo CreateCredFile-Helper.ps1CyberArk Marketplace - CyberArk Privilege Cloud ToolsTimeline Intro 0:00 Demo 1:23" }, { "title": "#13 - Switch CPM From Primary To DR Connector", "url": "/posts/YouTube-13-ISPSS-Privilege-Cloud-Switch-CPM-to-DR/", "categories": "Privilege Cloud, Connector Management, CPM", "tags": "cyberark, privilegecloud, connectormanagement, cpm", "date": "2024-05-09 09:10:10 +1000", "snippet": "This video covers the process of switching the CPM from Primary to DR.Objectives ApiKeyManager.exe removed from CPM 14.2+ Upgrade CPM from 14.0 to 14.2 New CPM Sync Component Utility Move CPM f...", "content": "This video covers the process of switching the CPM from Primary to DR.Objectives ApiKeyManager.exe removed from CPM 14.2+ Upgrade CPM from 14.0 to 14.2 New CPM Sync Component Utility Move CPM from CON1 to CON2 Move CPM form CON2 to CON1CyberArk Documentation - SyncComponentUsers utilityCyberArk Documentation - Switch between the primary and DR CPMsAdd to vault.ini[API]Addresses=https://subdomain.privilegecloud.cyberark.cloud/passwordvaultTimeline Intro 0:00 ApiKeyManager.exe 1:23 CPM Upgrade 2:07 Move CPM from CON1 to CON2 4:12 Test CPM and Fix PluginManagerUser Issue 9:05 Move CPM from CON2 to CON1 11:05" }, { "title": "#12 - CyberArk Privilege Cloud | Connector Updates 14.1", "url": "/posts/YouTube-12-ISPSS-Privilege-Cloud-Connector-Updates/", "categories": "Privilege Cloud, Connector Management, CPM, PSM, PSMP", "tags": "cyberark, privilegecloud, connectormanagement, cpm, psm, psmp", "date": "2024-03-15 10:10:10 +1100", "snippet": "This video covers the process to updating the windows CyberArk connector server via Connector Management and unix PSMP.Objectives Documentation Overview and CyberArk Marketplace Update Group Poli...", "content": "This video covers the process to updating the windows CyberArk connector server via Connector Management and unix PSMP.Objectives Documentation Overview and CyberArk Marketplace Update Group Policy Update Connector Management Agent Update CPM via Connector Management Update PSM via Connector Management Update Secure Tunnel Update Identity Connector Update PSMPThe CyberArk documenation can be found here.Backup Group Policy commandgpresult /h C:\\CyberArk\\PolicyBeforeUpgrade.htmlYou can find the latest psmpwiz scritps at this GitHub page. Copy the RAW link for the relvant version.In the video we used the follwoing script for version 14.1https://raw.githubusercontent.com/pCloudServices/psmpwiz/main/psmpwiz1410.shTimeline Intro 0:00 Lab Overview and Documentation 0:42 Upgrade Checks 1:42 Group Policy Hardening Update 3:31 Reset Installer User Password 5:46 Connector Management Update and CPM Update 6:18 PSM Update 9:32 Secure Tunnel and Identity Connector Update 13:06 PSMP Update 17:03" }, { "title": "#11 - CyberArk Privilege Cloud | PSMP Proxy Configuration", "url": "/posts/YouTube-11-ISPSS-Privilege-Cloud-PSMP-Configuration/", "categories": "Privilege Cloud, PSMP, squid proxy", "tags": "cyberark, privilegecloud, psmp, squidproxy", "date": "2023-12-20 10:10:10 +1100", "snippet": " WARNING Be Aware That This Is Currently Under Controlled Availability. For This To Be Supported You Need To Get Written Approval From PM, Contact Your Account Executive To Start This Process.If ...", "content": " WARNING Be Aware That This Is Currently Under Controlled Availability. For This To Be Supported You Need To Get Written Approval From PM, Contact Your Account Executive To Start This Process.If You Do Not, CyberArk Can’t Guarantee Support.This video covers the PSMP connector install with a proxy for internet access. If you are not using a proxy server, please refer to this post for more details.CyberArk KB - Proxy Configuration in Privilege CloudObjectives LAB Overview Install PSMP v13.2 using web proxy Test PSMPPSMP Install commandsCopy PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-vXX.X.zip file to PSMP serverscp \"C:\\Install\\CyberArk Privilege Cloud_14.0_1700448236427\\Privileged Cloud\\Privileged Session Manager for SSH\\PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v14.0.zip\" localadmin@psmp10:~SSH to PSMPEdit file /etc/dnf/dnf.conf using visudo vi /etc/dnf/dnf.confAdd the following line to the bottom.proxy=http://webproxy.cybrad.au:3128Install packages wget unzip and nanosudo dnf install wget unzip nanoEdit environment variables.sudo nano /etc/environmentAdd the follwoing lineshttp_proxy=http://webproxy.cybrad.au:3128https_proxy=http://webproxy.cybrad.au:3128sudo rebootTidy up filesmkdir PSMPmv PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v14.0.zip ./PSMP/cd PSMP/Download psmpwiz scriptwget https://raw.githubusercontent.com/pCloudServices/psmpwiz/main/psmpwiz1320.shChange file permissionschmod 755 CreateCredFile CARKpsmp-13.2.0.15.x86_64.rpm psmpwiz1320.shls -ltrEdit vault.ininano vault.iniUpddate vault address on line 2ADDRESS=vault-subdomain.privilegecloud.cyberark.cloudAdd in proxy detailsPROXYTYPE=HTTPSPROXYADDRESS=webproxy.cybrad.auPROXYPORT=3128Run psmpwiz scriptsudo ./psmpwiz1320.shEdit psmpsrv-psmpserver.service filesudo nano /usr/lib/systemd/system/psmpsrv-psmpserver.serviceAppend the follwoing on the line that starts wint Environment=\"HTTPS_PROXY=webproxy.cybrad.au:3128\"Daemon reload and restart servicesudo systemctl daemon-reloadsudo service psmpsrv restartTroubleshootingThis command dispalys a live monitor of the PSMTrace logsudo tail -f /var/opt/CARKpsmp/logs/PSMPTrace.logTimeline Intro 0:00 Lab Overview 0:26 Set installer user password 0:44 PSMP Install 1:08 Troubleshoot PSMP 6:41 Test PSMP 8:15" }, { "title": "#10 - CyberArk Privilege Cloud | Windows Proxy Configuration", "url": "/posts/YouTube-10-ISPSS-Privilege-Cloud-Win-Proxy-Configuration/", "categories": "Privilege Cloud, PSM, CPM, Secure Tunne, Identity Connector, squid proxy", "tags": "cyberark, privilegecloud, psm, cpm, squidproxy", "date": "2023-12-13 10:10:10 +1100", "snippet": " WARNING Be Aware That This Is Currently Under Controlled Availability. For This To Be Supported You Need To Get Written Approval From PM, Contact Your Account Executive To Start This Process.If ...", "content": " WARNING Be Aware That This Is Currently Under Controlled Availability. For This To Be Supported You Need To Get Written Approval From PM, Contact Your Account Executive To Start This Process.If You Do Not, CyberArk Can’t Guarantee Support.This video covers the Windows connector install with a proxy configuraiton.Objectives Proxy / Network Requirements Pre-Requisites checks and tests Install CPM and PSM v14.0 using web proxy Install and configure Secure Tunnel v3.1 using web proxy Install and configure Identity Connector using web proxy Configure Group Policy hardening Test CPM, PSM, Secure Tunnel and Identity connectorLinksProxy Configuration in Privilege CloudCurl Proxy testing commands.\\curl -v https://cybrad.cyberark.cloud --proxy http://webproxy.cybrad.au:3128.\\curl -v https://connector-cybrad.privilegecloud.cyberark.cloud --proxy http://webproxy.cybrad.au:3128.\\curl -v https://console.privilegecloud.cyberark.cloud --proxy http://webproxy.cybrad.au:3128.NET machine.confignotepad C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Config\\machine.confignotepad C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Config\\machine.configTimeline Intro 0:00 Lab Overview 1:08 Proxy Setup 2:40 Documentaiton 4:10 Connectivity Testing 4:50 Install CPM and PSM 10:08 PSM Hardening 16:00 PSM registration 18:55 Secure Tunnel Install 20:56 PSM Certificate 22:59 Identity Connector 24:50 Privilege Cloud Settings 25:53 Group Policy Hardening 27:18 Test CPM, PSM and Identity 29:02" }, { "title": "#9 - CyberArk Privilege Cloud | PSM Health Check & Load Balancing", "url": "/posts/YouTube-9-ISPSS-PSM-Health-Check/", "categories": "Privilege Cloud, PSM, PSMP, Health Check", "tags": "cyberark, privilegecloud, psm, psmp, haproxy", "date": "2023-12-06 10:10:10 +1100", "snippet": "This video covers the PSM Health check.Objectives Configure PSM Health Check Test PSM Health Check with PowerShell Configure PSM Load Balancing in Privilege Cloud Portal Configuration overview ...", "content": "This video covers the PSM Health check.Objectives Configure PSM Health Check Test PSM Health Check with PowerShell Configure PSM Load Balancing in Privilege Cloud Portal Configuration overview for HAProxy Load Balancer Test PSM Health Check with HAProxy Load Balancer Test PSMP Load Balancing via HAProxyPSM Health Check LinksDeploy PSM Health CheckPSM Health Check InstallationDownload .NET 8.0 Hosting BundleCyberArk MarketPlace - PSM Health checkHAProxy ConfigurationHAProxy config file /etc/haproxy/haproxy.cfgglobal log /dev/log local0 log /dev/log local1 notice chroot /var/lib/haproxy stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners stats timeout 30s user haproxy group haproxy daemondefaults log global mode http option httplog option dontlognull option log-health-checks timeout connect 5000 timeout client 50000 timeout server 50000 errorfile 400 /etc/haproxy/errors/400.http errorfile 403 /etc/haproxy/errors/403.http errorfile 408 /etc/haproxy/errors/408.http errorfile 500 /etc/haproxy/errors/500.http errorfile 502 /etc/haproxy/errors/502.http errorfile 503 /etc/haproxy/errors/503.http errorfile 504 /etc/haproxy/errors/504.http# Cyberark Windows PSM Load Balancerfrontend CyberArk_PSM_3389_frontend bind *:3389 mode tcp option tcplog default_backend CyberArk_PSM_3389_backendbackend CyberArk_PSM_3389_backend mode tcp balance leastconn option httpchk http-check connect port 80 http-check send meth GET uri /psm/api/health http-check expect string PASS # Define your CyberArk PSM servers here server PSM_con1 con1.cybrad.au:3389 check inter 4s fall 3 rise 2 server PSM_con2 con2.cybrad.au:3389 check inter 4s fall 3 rise 2# CyberArk UNIX PSMP Load Balancerfrontend CyberArk_PSMP_22_front bind *:22 mode tcp option tcplog default_backend CyberArk_PSMP_22_backbackend CyberArk_PSMP_22_back mode tcp balance leastconn option tcp-check # Define your CyberArk PSMP servers here server PSMP1 psmp1.cybrad.au:22 check inter 4s fall 3 rise 2 server PSMP2 psmp2.cybrad.au:22 check inter 4s fall 3 rise 2listen stats bind :8888 mode http stats enable stats hide-version stats realm Haproxy\\ Statistics stats uri / # Choose a URL path for the stats interface stats refresh 5sTimeline Intro 0:00 Lab Overview 1:02 Documentation 1:25 Install PSM Health Check on CON1 2:02 Test PSM Health Check and fix cert issue 4:13 Install PSM Health Check on CON2 6:00 Set Health Check to listen on port 80 6:55 Review Load Balancer config in Privilege Cloud Portal 8:14 Review HAProxy configuraiton 9:20 Test PSM Health Check with HAProxy 10:51 Test PSM Load Balancer vi HTML5 Gateway 12:05 Test PSMP Load Balancing via HAProxy 13:04" }, { "title": "#8 - CyberArk Privilege Cloud | Microsoft Azure", "url": "/posts/YouTube-8-ISPSS-Microsoft-Azure/", "categories": "Privilege Cloud, CPM, PSM, Microsoft Azure, Microsoft Entra ID", "tags": "cyberark, privilegecloud, cpm, psm, microsoft, azure, entraid", "date": "2023-09-25 09:10:10 +1000", "snippet": "This video covers the Microsoft Azure platform.Objectives Configure Azure Platform for Application Keys and Password Management Create CyberArk CPM Application in Azure Onboard and rotate the Cy...", "content": "This video covers the Microsoft Azure platform.Objectives Configure Azure Platform for Application Keys and Password Management Create CyberArk CPM Application in Azure Onboard and rotate the CyberArk CPM application key into CyberArk Onboard and rotate Azure Cloud accounts into CyberArk Establish PSM session to Azure Web Portal using cloud accounts Establish PSM session to Azure Web Portal using domain accounts Create a Connection Component for Microsoft MyApps Portal Establish PSM session to Microsoft My Apps portal using a domain accountCyberArk Marketplace LinksMicrosoft Azure Application Keys - CPMMicrosoft Azure Password Management - CPMMicrosoft Azure Portal - PSMMicrosoft Azure PortalAddresshttps://portal.azure.comPSM-MS-AzurePortal -&gt; Target Settings -&gt; Web Form Settings -&gt; WebFormFieldsi0116 &gt; {username}@cybrad.auidSIButton9 &gt; (Button)i0118 &gt; {password}idSIButton9 &gt; (Button)idSIButton9 &gt; (Button)_weave_e_10 &gt; (Validation)Microsoft My Apps PortalAddresshttps://myapps.microsoft.com/PSM-MS-AzurePortal -&gt; Target Settings -&gt; Web Form Settings -&gt; WebFormFieldsi0116 &gt; {username}@cybrad.auidSIButton9 &gt; (Button)i0118 &gt; {password}idSIButton9 &gt; (Button)idSIButton9 &gt; (Button)me-control-container &gt; (Validation)Timeline: Intro 0:00 Lab Overview 1:33 Market Place Links 1:57 Create Safes 2:30 Azure Platform 2:56 Create Azure CPM App Registration 3:26 Onboard Azure CPM Account 5:55 Onboard Cloud Accounts 7:57 Configure Azure PSM Cloud Account 11:56 Validation Error Fix 14:05 Configure Azure PSM AD Account 17:28 Configure MS MyApps PSM AD Account 19:03" }, { "title": "#7 - CyberArk Privilege Cloud | Palo Alto Networks PAN-OS", "url": "/posts/YouTube-7-ISPSS-Palo-Alto-Networks/", "categories": "Privilege Cloud, CPM, PSM, Palo Alto", "tags": "cyberark, privilegecloud, cpm, psm, paloalto, panos", "date": "2023-09-20 09:10:10 +1000", "snippet": "This video covers the Palo Alto PAN-OS platform.Objectives Import PAN-OS CPM Platform Import PAN-OS PSM Connection Component CPM: Manage Palo Alto PAN-OS local accounts PSM: Connect to PAN-OS u...", "content": "This video covers the Palo Alto PAN-OS platform.Objectives Import PAN-OS CPM Platform Import PAN-OS PSM Connection Component CPM: Manage Palo Alto PAN-OS local accounts PSM: Connect to PAN-OS using local accounts for both SSH and Web PSM: Connect to PAN-OS using Active-Directory managed accounts for both SSH and Web PSMP: Connect to PAN-OS using local accounts via SSHCyberArk Marketplace LinksPalo Alto Networks PAN-OS - CPMPalo Alto Networks PAN-OS - PSMPSM-PaloAltoWebWebFormFieldsTarget Settings -&gt; Web Form Settings -&gt; WebFormFieldsuser&gt;{Username}passwd&gt;{Password}submit&gt;(Button)ext-gen60 &gt; (Validation)PSM-SSH-PaloAlto-DomainPSMRemoteMachineUser Parameters-&gt; Create ParameterName:PSMRemoteMachineDisplayName:Firewall HostnameType:CyberArk.PasswordVault.Web.TransparentConnection.RemoteMachineUserParameter, CyberArk.PasswordVault.WebClientAppTarget Settings -&gt; Client Specific-&gt; Create ParameterName:ClientAppValue:\"putty.exe\" -ssh \"{UserName}\"@\"{PSMRemoteMachine}\" -pw \"{Password}\"PSMP Connection Stringssh brad@cybrad.au@ca.superuser@firewall.cybrad.au@psmp1cybrad.au -i \"C:\\Users\\Brad\\Downloads\\key.openssh\"PSM for SSH Syntax Cheat SheetTimeline: Intro 0:00 Download Plugins form Cyberark Marketplace 00:52 Clean Up Palo Alto Connection Components from last video 01:11 Create Safes for Palo Alto local accounts 1:49 Import Palo Alto PAN-OS CPM Plugin 2:34 Duplicate Palo Alto PAN-OS CPM Platform 2:49 Onboard Palo Alto PAN-OS local accoutns 3:19 Configure Palo Alto PAN-OS settings4:09 Change local PAN-OS passwords 5:48 Link reconcile accounts for local PAN-OS accounts 7:36 Test PSM-SSH for local PAN-OS accounts 9:40 Import Palo Alto PAN-OS PSM Connection Component 10:08 Test local Palo Alto PAN-OS web sessions 13:00 Validation Issue Fix 13:15 Enable Trace 16:05 PSM: Using Active-Directory accounts via PSM web session 17:18 PSM: Using Active-Directory accounts via PSM SSH session 20:30 PSMP: Using local PAN-OS Account 23:11" }, { "title": "#6 - CyberArk Privilege Cloud | PSM Web Sessions", "url": "/posts/YouTube-6-ISPSS-PSM-Web-Sessions-Using-Chrome-and-Edge/", "categories": "Privilege Cloud, PSM, Chrome, Edge", "tags": "cyberark, privilegecloud, psm, chrome, edge", "date": "2023-09-13 09:10:10 +1000", "snippet": "This video covers enabling web browsers running in a PSM session for both Google Chrome and Microsoft Edge.Objectives Use Add-PSMApps.ps1 script to install Chrome and Edge Configure AppLocker for...", "content": "This video covers enabling web browsers running in a PSM session for both Google Chrome and Microsoft Edge.Objectives Use Add-PSMApps.ps1 script to install Chrome and Edge Configure AppLocker for Chrome Create a connection component for (Palo Alto Web) using Chrome Test PSM web session to a test target using Chrome Create a connection component for (Palo Alto Web) using Edge Test PSM web session to a test target using Edge Web Driver UpdaterPSM Web Sessions - Google ChromeInstall Google Chrome and Microsoft Edge using Add-PSMApps.ps1 scriptAdd-PSMApps.ps1 script is found here..\\Add-PSMApps.ps1 -Application \"GoogleChromeX64\",\"MicrosoftEdgeX86\"Google Chrome AppLocker RequirementsCheck the version of Google Chrome installed on the PSM server and download the chrome driver from here. Usually you will select the chromedriver win32 from the Stable section.Extract the chromedriver.exe and place it in the following locations\"C:\\Program Files (x86)\\CyberArk\\Password Manager\\bin\\chromedriver.exe\"\"C:\\Program Files (x86)\\CyberArk\\PSM\\Components\\chromedriver.exe\"Edit the PSMConfigureAppLocker.xml file located at “C:\\Program Files (x86)\\CyberArk\\PSM\\Hardening\\PSMConfigureAppLocker.xml”At about line 147 you will find the following text, leave it there and make a new line underneath. &lt;Application Name=\"GoogleChrome\" Type=\"Exe\" Path=\"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\" Method=\"Publisher\" /&gt;And place the following line of text. &lt;Application Name=\"GoogleChromeDriver\" Type=\"Exe\" Path=\"C:\\Program Files (x86)\\CyberArk\\PSM\\Components\\chromedriver.exe\" Method=\"Path\" /&gt;Run PowerShell as Administrator and execute the PSMConfigureAppLocker.ps1 script.PSM Components Options configuration (Google Chrome)Administration -&gt; Configuration OptionsConfiguraitons -&gt; Connection ComponentsConfiguraitons -&gt; Connection Components -&gt; Connection Component ID -&gt; Target Settings -&gt; Client SpecificBrowserPath - Value =C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exeEnableTrace - Value = Yes or NoPSM Web Sessions - Microsoft EdgeMicrosoft Edge AppLocker RequirementsCheck you version of Microsoft Edge installed on the PSM server and download the x86 edge driver version.https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/\"C:\\Program Files (x86)\\CyberArk\\Password Manager\\bin\\msedgedriver.exe\"\"C:\\Program Files (x86)\\CyberArk\\PSM\\Components\\msedgedriver.exe\"App locker - Microsoft EdgeIn the”– Allowed DLLs –” section add the follwoing line &lt;Libraries Name=\"NATIVEIMAGES\" Type=\"Dll\" Path=\"%WINDIR%\\ASSEMBLY\\NATIVEIMAGES_V4.0.30319_32\\*\" Method=\"Path\" SessionType=\"*\" /&gt;In the “– Microsoft Edge process –” section, uncomment the Edge application and add the EdgeDrive line. &lt;Application Name=\"Edge\" Type=\"Exe\" Path=\"C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe\" Method=\"Publisher\" /&gt; &lt;Application Name=\"EdgeDriver\" Type=\"Exe\" Path=\"C:\\Program Files (x86)\\Cyberark\\PSM\\Components\\msedgedriver.exe\" Method=\"Publisher\" /&gt;In the “– Allowed DLLs –” section add NATIVEIMAGES.NOTE: this is different to the NATIVEIMAGES above. &lt;Libraries Name=\"NATIVEIMAGES\" Type=\"Dll\" Path=\"%WINDIR%\\ASSEMBLY\\NATIVEIMAGES_V4.0.30319_32\\*\" Method=\"Path\" /&gt;PSM Components Options configuration (Microsoft Edge)Administration -&gt; Configuration OptionsConfiguraitons -&gt; Connection ComponentsDuplicate an existing Chrome Connecton ComponentConfiguraitons -&gt; Connection Components -&gt; Connection Component ID -&gt; Target SettingsChange the value for “ClientApp” form Chrome to EdgeConfiguraitons -&gt; Connection Components -&gt; Connection Component ID -&gt; Target Settings -&gt; Client SpecificBrowserPath - Value =C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exeEnableTrace - Value = Yes or NoSee Cyberark Documentation - Web applications for PSMTimeline: Intro 0:00 Palo Alto Firewall Setup 0:59 Install Chrome and Edge using Add-PSMApps.ps1 script 2:14 Chrome Driver and PSMConfigureAppLocker.xml for Chrome 3:37 Chrome PSM Connection Component example - Palo Alto 7:31 Test Chrome PSM Session 11:26 Edge Web Driver and PSMConfigureAppLocker.xml for Edge 12:07 Edge PSM Connection Component example - Palo Alto 14:42 Test Edge PSM Session 16:14 WebDriverUpdater Overview 17:49" }, { "title": "#5 - CyberArk Privilege Cloud | Move PSM Application Users To The Domain Level", "url": "/posts/YouTube-5-ISPSS-Move-PSMConnect-and-PSMAdminConnect/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, privilegecloud, psm, psmconnect, psmadminconnect", "date": "2023-09-07 09:10:10 +1000", "snippet": "This video covers moving the PSM application users to the domain level.Objectives Create the PSMConnect and PSMAdminConnect users in your domain Modify the domain users in Active Directory Updat...", "content": "This video covers moving the PSM application users to the domain level.Objectives Create the PSMConnect and PSMAdminConnect users in your domain Modify the domain users in Active Directory Update Group Policy Run the Set-DomainUser script Test PSM Session / MonitoringSet-DomainUser.ps1 script is found here.Timeline: Intro 0:00 Documentation 0:48 Testing PSM and Monitoring before Change 1:56 Requirements 3:08 Create PSMConnect and PSMAdminConnect in Active-Directory 3:41 Group Policy hardening changes 5:48 Run Set-DomainUser.ps1 script 6:41 Update PSM safe 8:43 Update PSM Application Platform 9:08 Rotate PSMConnect and PSMAdminConnect passwords 9:54 Gpupdate / restart 12:05 Test PSM Sessions and PSM session monitoring 12:38" }, { "title": "#4 - CyberArk Privilege Cloud | PSM for SSH (PSMP)", "url": "/posts/YouTube-4-ISPSS-PSMP/", "categories": "Privilege Cloud, PSMP", "tags": "cyberark, privilegecloud, psmp, psmforssh", "date": "2023-09-06 09:10:10 +1000", "snippet": "This video covers setting up the *NIX platform and installing PSM for SSH (PSMP).Objectives Setup Unix Platform, Configuration Options and Create Safes Onboard Linux Account Test CPM and PSM PS...", "content": "This video covers setting up the *NIX platform and installing PSM for SSH (PSMP).Objectives Setup Unix Platform, Configuration Options and Create Safes Onboard Linux Account Test CPM and PSM PSMP Requirements Install PSMP Test PSMP Configure and Test PSM For SSH MFA CachingCommands used to install PSMPDownload PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v1X.X.zip from the CyberArk MarketplaceCopy package from windows machine to PSMP serverscp \"C:\\&lt;Path_To_File&gt;\\PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v13.2.zip\" &lt;USERNAME&gt;@&lt;PSMP_HOSTNAME&gt;:~/Update the system and install wget and unzipsudo dnf updatesudo dnf install wget unziplsmkdir PSMPmv PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v13.2.zip ./PSMP/cd ./PSMP/lsunzip PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v13.2.zipPSMPWIZ scripts are found here. You will need to update this url depending on the version of PSMP being installed.wget https://raw.githubusercontent.com/pCloudServices/psmpwiz/main/psmpwiz1320.shConfirm you have the filesls -ltrAdd the exectue permission to the follwoing files:chmod 755 CreateCredFilechmod 755 CARKpsmp-13.2.0.15.x86_64.rpmchmod 755 psmpwiz1320.shIf you are not running as the root users, switch to the root user.sudo -iChange Directory to where the PSMP files are locatedcd /home/&lt;USERNAME&gt;/PSMP/Confirm if the files are executablels -ltrRun the PSMP wizard./psmpwiz1320.shLinksPSM for SSH Syntax Cheat Sheet" }, { "title": "#3 - CyberArk Privilege Cloud | Secure Tunnel and HTML5 Gateway", "url": "/posts/YouTube-3-ISPSS-Secure-Tunnel-HTML5-Gateway/", "categories": "Privilege Cloud, Secure Tunnel", "tags": "cyberark, privilegecloud, secure tunnel, HTML5gateway", "date": "2023-09-05 09:10:10 +1000", "snippet": "This video covers configuring certificats for the HTML5 gateway, installing the secure tunnel software and load balancer configuraiton.Objectives Configure Self-Signed Certificate for PSM Configu...", "content": "This video covers configuring certificats for the HTML5 gateway, installing the secure tunnel software and load balancer configuraiton.Objectives Configure Self-Signed Certificate for PSM Configure Remote Desktop Services Certificate Export Certificate Install CyberArk Secure Tunnel software Configure Privilege Cloud to use HTML5 gateway Configure settings to support PSM Load Balancer Test PSM via HTML5 Gateway" }, { "title": "#2 - CyberArk Privilege Cloud | Connector Installation", "url": "/posts/YouTube-2-ISPSS-Connector-Installation/", "categories": "Privilege Cloud, Connector Management", "tags": "cyberark, privilegecloud", "date": "2023-09-04 09:10:10 +1000", "snippet": "This video covers installing the CyberArk Privilege Cloud connector software.Objectives Prepare Group Policy Run Connector Management Pre-Requisites Script - Download Script Install Connector Ma...", "content": "This video covers installing the CyberArk Privilege Cloud connector software.Objectives Prepare Group Policy Run Connector Management Pre-Requisites Script - Download Script Install Connector Management Agent Install CPM and PSM via Connector Management Configure CyberArk Group Policy HardeningCyberArk Group Policy Hardening Prepare for onboarding Windows Account: Master Policy, Platform Management Create a safe and onboard Windows Domain Admin accountLinksPrivilege Cloud - How to run the ConnectorCheckPrerequisites script" }, { "title": "#1 - CyberArk Privilege Cloud | Identity Setup", "url": "/posts/YouTube-1-ISPSS-Identity-Setup/", "categories": "Privilege Cloud, Identity", "tags": "cyberark, privilegecloud, identity", "date": "2023-09-03 09:10:10 +1000", "snippet": "This video covers the initial process of logging into Privilege Cloud and allowing Active-Directory users to log into the platform. It also covers how to remove SMS and Email MFA factors.Objectives...", "content": "This video covers the initial process of logging into Privilege Cloud and allowing Active-Directory users to log into the platform. It also covers how to remove SMS and Email MFA factors.Objectives Log into Privilege Cloud for the first time Configure Authentication Profile and Secured Zones Configure Identity Policy Install CyberArk Identity Connector Software - Install Identity Connector via PowerShell Script Setup of alternative MFA options, OTP and FIDO2 - Security Key Remove Email and SMS MFA options" }, { "title": "PSMP Installation", "url": "/posts/PSMP-Installation/", "categories": "Privilege Cloud, PSMP", "tags": "psmp", "date": "2023-07-07 10:10:10 +1000", "snippet": "PSMP InstallationDownload PSMP Installation ScriptUse the follwoing command to downlaod the psmpwiz1xxx.sh script. Make sure it is placed in the same folder as PrivilegedSessionManagerSSHProxy-RHEL...", "content": "PSMP InstallationDownload PSMP Installation ScriptUse the follwoing command to downlaod the psmpwiz1xxx.sh script. Make sure it is placed in the same folder as PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v1X.X.zipcd /home/&lt;username&gt;/PSMP/wget https://raw.githubusercontent.com/pCloudServices/psmpwiz/main/psmpwiz1310.shTest Network ConnectivityThe follwoing commands will test outbound connectivity from the PSMP server to Privilege Cloud.curl -v telnet://&lt;subdomain&gt;.privilegecloud.cyberark.cloud:443curl -v telnet://&lt;subdomain&gt;.cyberark.cloud:443curl -v telnet://&lt;subdomain&gt;.privilegecloud.cyberark.cloud:1858curl -v telnet://&lt;CyberArkIdentityID&gt;.id.cyberark.cloud:443Create proxymng User and proxymanagers Groupuseradd proxymngpasswd proxymnggroupadd proxymanagersusermod -a -G proxymanagers proxymngModify SSHD Config Filevi /etc/ssh/sshd_configAdd the following line to the bottom of /etc/ssh/sshd_configAllowGroups proxymanagers PSMConnectUsersRestart the SSH serviceservice sshd restartservice sshd statusChange Directory to /home/localadmin/PSMP/cd /home/localadmin/PSMP/Unzip CyberArk Fileslsunzip PrivilegedSessionManagerSSHProxy-RHELinux8-Intel64-Rls-v1X.X.zipunzip psmpwiz1XX.zipSet the following files to executablels -ltrchmod 755 CARKpsmp-1X.xx.xx.xx.rpmchmod 755 CreateCredFilechmod 755 psmpwiz1XX.shRun the PSMP install script./psmpwiz1XX.shPSM for SSH requirementshttps://docs.cyberark.com/Product-Doc/OnlineHelp/PrivCloud/Latest/en/Content/Privilege%20Cloud/PrivCloud-sys-req-PSM-SSH.htm?tocpath=Setup%7CSystem%20requirements%7C_____3" }, { "title": "Setup PSM Certificate for PSM Gateway", "url": "/posts/Setup-PSM-Certificate-for-PSM-Gateway/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, html5 gateway, ssl, certificate", "date": "2023-07-07 09:10:10 +1000", "snippet": "Setup PSM Certificate for PSM GatewayOptional Self-Signed CertificateUs this script to generate a self-signed certificate if there in’t an internal CA avalilable.New-SelfSignedCertificate -DnsName ...", "content": "Setup PSM Certificate for PSM GatewayOptional Self-Signed CertificateUs this script to generate a self-signed certificate if there in’t an internal CA avalilable.New-SelfSignedCertificate -DnsName \"cyberarkpsm.domain.com\", \"psmserver1.domain.com\", \"psmserver2.domain.com\" -NotAfter (Get-Date).AddYears(3) -TextExtension @(\"2.5.29.37={text}1.3.6.1.5.5.7.3.1\") -KeyLength 4096 -KeyExportPolicy Exportable -CertStoreLocation \"cert:\\LocalMachine\\My\"PSM Server Change Certificate#Copy the thumbprint for the certificate you have the Private Key of (usually the personal certificate of the machine unless the customer followed your instructions to build the CA from scratch)Get-ChildItem \"Cert:\\LocalMachine\\My\"#Set the path for where the thumbprint will be seen by RDS$PATH = (Get-WmiObject -class \"Win32_TSGeneralSetting\" -Namespace root\\cimv2\\terminalservices)#Execute the changeSet-WmiInstance -Path $PATH -argument @{SSLCertificateSHA1Hash=\"&lt;INSERT-Thumbprint-HERE&gt;\"}In the Privilege Cloud web portal. Goto Administration -&gt; Configuration Options -&gt; Connection Components -&gt; PSM-RDP -&gt; User Parameters.Configure the connection component to use the HTML5 GW.Name:AllowSelectHTML5DisplayName:In BrowserValue:YesType:CyberArk.TransparentConnection.BooleanUserParameter, CyberArk.PasswordVault.TransparentConnection" }, { "title": "CyberArk PSM Health Check", "url": "/posts/PSM-Health-Check/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, PSM Health Check", "date": "2023-07-07 09:10:10 +1000", "snippet": "RequirementsDownlaod the PSM Health Check Scripthttps://cyberark-customers.force.com/mplace/s/#–PSM+Health+checkDownload .NET Core Runtime 6.0.Xhttps://dotnet.microsoft.com/en-us/download/dotnet/6....", "content": "RequirementsDownlaod the PSM Health Check Scripthttps://cyberark-customers.force.com/mplace/s/#–PSM+Health+checkDownload .NET Core Runtime 6.0.Xhttps://dotnet.microsoft.com/en-us/download/dotnet/6.0Run the HealthCheck.ps1 script.\\HealthCheck.ps1 -installPath \"E:\\Program Files (x86)\\Cyberark\\PSM\"orUse this command when CyberArk has been installed on a different drive letter..\\HealthCheck.ps1 -installPath \"E:\\Program Files (x86)\\Cyberark\\PSM\"Test Health CheckInvoke-WebRequest -uri https://fqdn/psm/api/health" }, { "title": "CyberArk PSM Native Access", "url": "/posts/PSM-Native-Access/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, psm, native access", "date": "2023-07-07 09:10:10 +1000", "snippet": "https://docs.cyberark.com/Product-Doc/OnlineHelp/PrivCloud/Latest/en/Content/Privilege%20Cloud/privCloud-connect-using-RDP.htm?tocpath=End%20Users%7CConnect%20to%20a%20target%20device%7C_____3#RDPs...", "content": "https://docs.cyberark.com/Product-Doc/OnlineHelp/PrivCloud/Latest/en/Content/Privilege%20Cloud/privCloud-connect-using-RDP.htm?tocpath=End%20Users%7CConnect%20to%20a%20target%20device%7C_____3#RDPsettingsfull address:s:PSMHOSTNAMEalternate shell:s:psm /u localadmin01 /a win1.cybr.com /c PSM-RDPusername:s:johnenablecredsspsupport:i:0If using RDCManhttps://cyberark-customers.force.com/s/article/How-to-setup-Remote-Desktop-Connection-Manager" }, { "title": "Install Cyberark Identity Connector", "url": "/posts/Identity-Connector-Installation/", "categories": "Privilege Cloud, Identity", "tags": "cyberark, identity connector", "date": "2023-07-06 09:10:10 +1000", "snippet": "Script to install CyberArk Identity ConnectorStart-BitsTransfer \"https://edge.idaptive.app/ProxyDownload/CyberArk-Identity-Management-Suite-win64.zip\" $env:TEMP\\CyberArk-Identity-Management-Suite-w...", "content": "Script to install CyberArk Identity ConnectorStart-BitsTransfer \"https://edge.idaptive.app/ProxyDownload/CyberArk-Identity-Management-Suite-win64.zip\" $env:TEMP\\CyberArk-Identity-Management-Suite-win64.zip$IdentityZipPackage = \"$env:TEMP\\CyberArk-Identity-Management-Suite-win64.zip\"Expand-Archive $IdentityZipPackage -DestinationPath $env:TEMP\\CyberArk-Identity-Management-Suite-win64$InstallerName = Get-ChildItem -Path $env:TEMP\\CyberArk-Identity-Management-Suite-win64\\CyberArk-Identity*.exe$InstallEXE = $InstallerName.NameStart-Process $env:TEMP\\CyberArk-Identity-Management-Suite-win64\\$InstallEXEWrite-Host \"Finished\"" }, { "title": "Reconcile Account", "url": "/posts/Reconcile-Account/", "categories": "Privilege Cloud, CPM", "tags": "cyberark, reconcile", "date": "2023-07-06 09:10:10 +1000", "snippet": "Script set permissions for Reconcile GroupInstructions below are based on this kb article.To give the Reconcile Group the minimum permissions to change user passwords.From Active Directory (You mus...", "content": "Script set permissions for Reconcile GroupInstructions below are based on this kb article.To give the Reconcile Group the minimum permissions to change user passwords.From Active Directory (You must have the Advanced Features view enabled) to proceed Right click on the domain &gt; PropertiesGoto the Security TabClick AdvancedSelect AddClick “Select a principal” at the top and search fro the Reconcile GroupApplies to: Drop Down menu &gt; Select “Descendant User objects” at the bottom.Scroll to the very bottom and slect “Clear All” to clear all permissionsScroll to the top and select the follwoing permissions.Reset PasswordRead permissionsRead account restrictionsRead general informationRead group membershipRead logon informationOnce complete slect OK and OK againDomain Admin accounts, along with a list of other groups, are protected. If you change the ACL on a member of the Domain Admins group, Active Directory will eventually change the ACL back based on a secure template. This template is AdminSDHolder and is always found in the System container.In order to grant your reconcile account the ability to change the password for members of protected groups, you must add that permission to the AdminSDHolder templateThe following script modifies the AdminSDHolder template.# This script will set the minimum permissions for the reconcile account# Set the AD account that will be used fo Reconcile$ReconcileAccount = \"&lt;Domain&gt;\\&lt;ReconcileUser&gt;\"# This gets the AD domain in DN format$DistinguishedName = (Get-ADDomain).DistinguishedNameWrite-host \"Domain OU is =\" $DistinguishedName# Domain Permissionsdsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":CA;Reset Password;user\"dsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":WD\"dsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":WPRP;LockoutTime;user\"dsacls.exe $DistinguishedName /i:S /G $ReconcileAccount\":WPRP;account restrictions;user\"# This gets the AdminSDHolder DN$AdminSDHolerDN = \"CN=AdminSDHolder,CN=System,\"+$DistinguishedNameWrite-host \"AdminSDHolder DN is =\" $AdminSDHolerDN# AdminSDHolder Templatedsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":CA;Reset Password\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":WD\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":RP;LockoutTime\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":WP;LockoutTime\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":RP;account restrictions\"dsacls.exe $AdminSDHolerDN /G $ReconcileAccount\":WP;account restrictions\"" }, { "title": "Add-PSMApps", "url": "/posts/Add-PSMApps/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, chrome, rsat", "date": "2023-07-04 09:10:10 +1000", "snippet": "The follwoing notes are based on the How to use Add PSMApplication documenation.Step 1: Download Privilege Cloud Tools and copy to C:\\CyberArk folder on the connector soerver.Step 2: Navigate and e...", "content": "The follwoing notes are based on the How to use Add PSMApplication documenation.Step 1: Download Privilege Cloud Tools and copy to C:\\CyberArk folder on the connector soerver.Step 2: Navigate and extract the Add-PSMAppsStep 3: Run a Powershell session as Administrator and run the follwoing sample command.This command adds ADUC,GPMC and a GenericMMC (RSAT) console.\\Add-PSMApps.ps1 -Application \"ADUC\",\"GPMC\",\"GenericMMC\" -MscPath \"C:\\PSMApps\\RSAT.msc\" -ComponentName \"RSAT\" -ComponentDisplayName \"PSM-RSAT\" -HTML5 \"OffByDefault\" -PortalUrl \"https://subdomain.privilegecloud.cyberark.cloud\"This command adds ADUC,GPMC only.\\Add-PSMApps.ps1 -Application \"ADUC\",\"DNS\" -HTML5 \"OffByDefault\" -PortalUrl \"https://subdomain.privilegecloud.cyberark.cloud\"This command adds GoogleChromeX64,ADUC,DNS,DHCP,GPMC and a GenericMMC (RSAT) console.\\Add-PSMApps.ps1 -Application \"GoogleChromeX64\",\"ADUC\",\"DNS\",\"DHCP\",\"GPMC\",\"GenericMMC\" -MscPath \"C:\\PSMApps\\RSAT.msc\" -ComponentName \"PSM-RSAT\" -ComponentDisplayName \"RSAT\" -HTML5 \"OffByDefault\" -PortalUrl \"https://subdomain.privilegecloud.cyberark.cloud\"I want it all!!! This command adds GoogleChromeX64,MicrosoftEdgeX86,ADUC,DNS,DHCP,GPMC and a GenericMMC (RSAT) console.\\Add-PSMApps.ps1 -Application \"GoogleChromeX64\",\"MicrosoftEdgeX86\",\"ADUC\",\"DNS\",\"DHCP\",\"GPMC\",\"GenericMMC\" -MscPath \"C:\\PSMApps\\RSAT.msc\" -ComponentName \"PSM-RSAT\" -ComponentDisplayName \"RSAT\" -HTML5 \"OffByDefault\" -PortalUrl \"https://subdomain.privilegecloud.cyberark.cloud\"" }, { "title": "CyberArk PSM Sessions Using Microsoft Edge", "url": "/posts/CyberArk-PSM-Session-using-Microsoft-Edge/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, edge", "date": "2023-07-03 09:10:10 +1000", "snippet": "CyberArk PSM with Microsoft EdgeInstall Microsoft EdgeDownload and install microsoft edge. Ensure you select the correct operating systemhttps://www.microsoft.com/en-us/edge?form=MA13FJ#evergreenIn...", "content": "CyberArk PSM with Microsoft EdgeInstall Microsoft EdgeDownload and install microsoft edge. Ensure you select the correct operating systemhttps://www.microsoft.com/en-us/edge?form=MA13FJ#evergreenInstall Edge DriverCheck you version of Microsoft Edge. 1XX.X.XXXX.XX and download the x86 driver version.https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/Extract the zip file and copy the msedgedriver.exe to the follwoing location:“C:\\Program Files (x86)\\Cyberark\\PSM\\Components\\msedgedriver.exe”Secure Web Application Connectors Frameworkhttps://cyberark-customers.force.com/mplace/s/#a3550000000EiCMAA0-a3950000000jjUwAAIExtract zip file in a temporary location.Copy all contents in the folder WebAppDispatcher-v13.0.0.87\\ComponentsAnd paste in C:\\Program Files (x86)\\Cyberark\\PSM\\Components This process will overwrite many files.App lockerIn the”– Allowed DLLs –” section add the follwoing line &lt;Libraries Name=\"NATIVEIMAGES\" Type=\"Dll\" Path=\"%WINDIR%\\ASSEMBLY\\NATIVEIMAGES_V4.0.30319_32\\*\" Method=\"Path\" SessionType=\"*\" /&gt;In the “– Microsoft Edge process –” section, uncomment the Edge application and add the EdgeDrive line. &lt;Application Name=\"Edge\" Type=\"Exe\" Path=\"C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe\" Method=\"Publisher\" /&gt; &lt;Application Name=\"EdgeDriver\" Type=\"Exe\" Path=\"C:\\Program Files (x86)\\Cyberark\\PSM\\Components\\msedgedriver.exe\" Method=\"Publisher\" /&gt;In the “– Allowed DLLs –” section add NATIVEIMAGES.NOTE: this is different to the NATIVEIMAGES above. &lt;Libraries Name=\"NATIVEIMAGES\" Type=\"Dll\" Path=\"%WINDIR%\\ASSEMBLY\\NATIVEIMAGES_V4.0.30319_32\\*\" Method=\"Path\" /&gt;PSM Components Options configurationAdministration -&gt; Configuration OptionsConfiguraitons -&gt; Connection ComponentsDuplicate an existing Chrome Connecton ComponentConfiguraitons -&gt; Connection Components -&gt; Connection Component ID -&gt; Target SettingsChange the value for “ClientApp” form Chrome to EdgeConfiguraitons -&gt; Connection Components -&gt; Connection Component ID -&gt; Target Settings -&gt; Client SpecificBrowserPath - Value =C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exeEnableTrace - Value = Yes or No" }, { "title": "Download and Install Google Chrome for PSM", "url": "/posts/Google-Chrome/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, chrome", "date": "2023-06-02 09:10:10 +1000", "snippet": "64bit Google ChromeThis script downloads Google Chrome 64bit and executes the msi installer.Start-BitsTransfer \"https://dl.google.com/edgedl/chrome/install/GoogleChromeStandaloneEnterprise64.msi\" $...", "content": "64bit Google ChromeThis script downloads Google Chrome 64bit and executes the msi installer.Start-BitsTransfer \"https://dl.google.com/edgedl/chrome/install/GoogleChromeStandaloneEnterprise64.msi\" $env:TEMP\\GoogleChromeStandaloneEnterprise64.msi$chromeinstaller = \"$env:TEMP\\GoogleChromeStandaloneEnterprise64.msi\"msiexec.exe /package $chromeinstaller32bit Google ChromeThis script downloads Google Chrome 32bit and executes the msi installer.Start-BitsTransfer \"https://dl.google.com/edgedl/chrome/install/GoogleChromeStandaloneEnterprise.msi\" $env:TEMP\\GoogleChromeStandaloneEnterprise64.msi$chromeinstaller = \"$env:TEMP\\GoogleChromeStandaloneEnterprise.msi\"msiexec.exe /package $chromeinstallerGoogle Chrome DriverDownlaod the Google Chrome Driver and place it in the “C:\\Program Files (x86)\\CyberArk\\PSM\\Components\" folderApplocker ConfigurationEdit file “C:\\Program Files (x86)\\CyberArk\\PSM\\Hardening\\PSMConfigureAppLocker.xml” &lt;!-- Google Chrome process --&gt; &lt;!-- If relevant, uncomment this part to allow Google Chrome webform based connection clients End of Google Chrome process comment --&gt; &lt;Application Name=\"GoogleChrome\" Type=\"Exe\" Path=\"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\" Method=\"Publisher\" /&gt; &lt;Application Name=\"GoogleChromeDriver\" Type=\"Exe\" Path=\"C:\\Program Files (x86)\\CyberArk\\PSM\\Components\\chromedriver.exe\" Method=\"Path\" /&gt; " }, { "title": "Handy Scripts", "url": "/posts/Scripts/", "categories": "Privilege Cloud, PSM", "tags": "cyberark, chrome", "date": "2023-06-01 09:10:10 +1000", "snippet": "Script to set phone number on all users in the acme labThis script sets the phone number for all the users in the ACME lab. Run the script on DC01. Once completed your phone number will be updated ...", "content": "Script to set phone number on all users in the acme labThis script sets the phone number for all the users in the ACME lab. Run the script on DC01. Once completed your phone number will be updated on Active-Directory acocunts.Run this in powershell as admin.# Ensure the Active Directory module is importedImport-Module ActiveDirectory# Prompt user for a mobile/cell number$StudentMobile = Read-Host \"Enter your Mobile/Cell number (e.g., +614xxxxxxxx)\"# Define users and assign the mobile number.$users = @( @{ Name = \"mike\"}, @{ Name = \"carlos\"}, @{ Name = \"cindy\"}, @{ Name = \"tom\"}, @{ Name = \"john\"}, @{ Name = \"paul\"})# Update mobile number for each userforeach ($user in $users) { try { Set-ADUser -Identity $user.Name -MobilePhone $StudentMobile Write-Host \"Updated mobile number for $($user.Name) to $StudentMobile\" } catch { Write-Warning \"Failed to update mobile number for $($user.Name): $_\" }}" } ]
